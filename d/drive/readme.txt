GOTO  5

Статус:

1 Надо сдеать так, чтобы  файлы не удалялись физически в течении полугода + 10 дней.
 1,1 При удалениях удаляем физ. файл только если с момента его создания прошло более чем срок.			*
      Виды удалений:																					*
         - один файл																					*
         - файлы из каталога																			*
         - отмеченные файлы																				*
 1,2 При определении пространства на диске учитывать, что многие не удалены физически.					*
       Видимо ещё одно поле нужно, устанавливается в 1 когда реально удален файл.
       isNoErased DEFAULT 1
         ставим его в 1 при псевдоудалении.
         Тогда isDeleted ставим как и сейчас в 1 и это позволит не переписывать логику
          не вывода удаленных.
         А вот /space.json будет учитывать вместо isDeleted = 1
           isDeleted = 1 AND isNoErased = 0
 1,3 Фронтенд делает запросы, которые удаляют помеченными на удаление 									*
		файлы, если с момента его создания прошло более чем срок
 1,4 Добавить алерт или пункт в меню "Сколько свободного места".										*
      Открывается отдельный экран с данными и кнопка "Чем занято?"
      При нажатии на "Чем занято?" Пишем про закон и пол-года.
      
Бэкапы хостера ничем не помогают в этом контексте, так как если мы 
позволим удалить файл раньше, чем его заархивировали, мы нарушаем закон.
Хотя, если мы разрешим удалять файлы, которые хранили 5 месяцев, 
ещё месяц мы сможем доставать их из бэкапа.

/sp/public/space.json


  
  

5 Промо экран. 

Надо сделать

Подробнее про промо экран.

Web USB - это ещё Х Гб для ваших файлов в облаке.

Зарегистрироваться и получить место на флешке.

Но главное не это.
Главная идея проекта в том, чтобы ваши файлы были доступны вам 
с любого вашшего компьютера или смартфона.

Web USB никогда не перестанет работать потому что вашему смартфону 
больше чем три или четыре года.
Файлы доступны на устройствах, с операционными системами 
начиная от android 2 и Wiodows XP и заканчивая самыми последними 
моделями.

Зарегистрироваться и получить место на флешке.

Пользователи делятся на две категории.
Одни с удовольствием покупают новые модели смартфонов и компьютеров как
только они выходят, другие смотрят на жизнь более рационально и неохотно
обновляют смартфон только потому, что привычные приложения для него 
больше не поддерживаются.

При этом иногда новое устройство чем-то хуже чем старое.

Например, среди новых смартонов невозможно найти такой же компактный,
каким был SAMSUNG GALAXY YOUNG GT-S5363.

А кого-то может выводить из себя наличие фронтальной камеры в 
новом смартфоне, в старых моделях её не было и 
можно было не думать о том, что прямо 
сейчас на тебя внимательно смотрят неизвестные глаза.

Меня зовут Андрей Н Л, я окончил АГТУ в 2010 году.
У меня довольно большая практика Web разработки.

И я решил создать ряд приложений и сервисов, 
главной фишкой которых будет то, что они
будут всегда поддерживаться на старых устройствах.

Разумеется, с новых устройств они также будут доступны.

Зарегистрироваться и получить место на флешке.

Я решил сделать Web USB, когда понял, что не могу добраться 
со всех своих старых устройств до своих же файлов, размещенных 
в популярных облачных хранилищах. 

Иногда их возможно скачать, используя Оперу-мини, 
но о том чтобы сохранить или отредактировать файл в облаке 
нечего и думать.

Поэтому я создал альтернативу популярным облачным хранилищам 
и охотно делюсь этой альтернативой с вами.

Зарегистрироваться и получить место на флешке.

Файлы хранятся на серверах First Dedik  / Selectel в Москве / Питере.

Проект находится в стадии бета-тестирования.
Это значит, что я не гарантирую, что ваши файлы никогда не пропадут из
хранилища, но насколько я знаю, этого не гарантируют даже Гугл, 
Яндекс и Мейл ру. По крайней мере, 
было время, когда огни это не гарантировали.

Пока не советую использовать это хранилище для бизнеса, или хранения 
критичных для вас важных файлов, но для личных 
не очень важных файлов оно может вам пригодится.

Лично я храню и достаточно важные для себя файлы, но тут уже вам решать, 
что хранить, как и сколько.

Я успешно использую это хранилище начиная с 2022 года и 
пока у меня всё прекрасно.

Пользуйтесь и вы.

Принесем в цифровой мир свои правила ;)

Зарегистрироваться и получить место на флешке.













Заметка. Версию для ie6 будем пилить на старом ПК.
Бэк можно будет сделать на основной машине (а зачем нам отдельный бэк?).
Фронтенд можно будет пилить и впрямь на старой машине. 
По FTP гонять, если не удастся php 7 в XP запустить.







Цель:
Онлайн хранилище а-ля гуглдрайв для старых смартфонов ( и новых и пк).
С редактором текстов.

1 Делаем рабочую копию (в каталоге fd (FormData)). Она просто работает так же как a2 *
2 Делаем аплоад с FormData.	*
3 Делаем учёт ssl (d 0.js запрашиваем по ssl пустой файл. Запоминаем удачно или нет.) *
4 Добавляем значок меню сверху.
 4.1 Кнопка.				*
 4.2 При нажатии на неё показываем главное меню. *
5 Выпиливаем backButton функционал.				 * (?)
6 Выпиливаем алерт backButton
 6.1 Выпиливаем диалог.							 *
7 Главное меню переносим вверх					 *
 7.1 Верстаем меню.								 *
 7.2 Выпиливаем нижнее меню, включая стили.      *
 
8 Экран авторизации. Как там с ssl?				 *
 - При первой смене языка не мешало бы редиректить на ssl - а в остальном норм.
 
9 Мультизагрузка.								*

 
10 Прикручиваем кэширование.					*
	(В самой приближенной версии done.) 
	В последствии надо научиться разрегистрировать 
	основной sw  и подключать новый
	 потому что мы хотиим кешировать mp3
	
10.1 Скачай из dev/addHs и подумай, надо ли оно тебе. (!)


11 Авторизация через соц. сети.
   1 Делаем просто страничку со сменой пользователей
   То есть мы берем просто двух админов и им показываем поле в userId 
	введя которое мы изменяем текущую сессию.
	
   - Есть. Далее, когда всё по авторизации через соц. сети будет готово, авторизацию сделать по сути как в changeUserAction.
    Только вместо recoveryHash там будет хеш из соц сети.
    
    Кнопку выхода делаем. * 
    
    В каталоге slg оставляем в 
     index.html только форму авторизации.
     Иконку - замок и открытый замок.
     флексим.
     (если что делай это всё из fd)
     
    По всей видимости будет slg/fb e. t. c.
     
    На эту страницу будет редирект с fb и прочего.
    1 Отправляем хеш.
    2 Бэк отправляет хеш в соц. сеть.
    3 Соц. сеть возвращает id в соц. сети (В socnet_user нужно ещё поле socnet_uid)
    4 По этому id находим userId.
      Если не найден, создаём новую запись в ausers
    5 Подменяем для пользователя хеш пароля на временный.
    6 Возвращаем данные на фронт (всё, что бывает в форме авторизации)
    7 Логинимся, затираем хеш временного пароля.

А у меня правда Sym 5.0.3??? - да

2 


В a2 версии пофиксить кнопку Cancel на форме загрузки.

----




d/drive/d  - access denied
По запросам парсим активный каталог.
При запросе файла копируем в t и создаем крон-задачу которая для файлов меньше 
500М через час дропает, для болших через 4 часа.


---
Дерево каталогов.
Пусть для userId = 25 
d/drive/d/1-100/25 - это корень его физической файловой системы.

Можно d/drive/d хранить отдельно в конфиге.
1-100/25 - величина вычисляемая (userId == 25 < 100).

Всё что лежит в d/drive/d/1-100/25 имеет parent_id = 0.

CREATE TABLE drv_catalogs (
`id` INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT COMMENT 'Таблица с деревом каталогов пользователя',
`user_id` INTEGER COMMENT 'ausers.id',
`parent_id` INTEGER DEFAULT 0 COMMENT 'drv_catalog.id',
`name` VARCHAR(255) COMMENT 'Имя каталога',
`is_deleted` TINYINT(1) DEFAULT 0 COMMENT 'Флаг удален или нет',
`is_hide` TINYINT(1) DEFAULT 0 COMMENT 'Флаг скрытый или нет',
INDEX `user_id` (`user_id`),
INDEX `parent_id` (`parent_id`),
INDEX `is_deleted` (`is_deleted`),
INDEX `is_hide` (`is_hide`)
)engine=innoDB DEFAULT CHARSET=utf8;
