<!DOCTYPE html>
<html xml:lang="ru" lang="ru">
	<head>
		<meta charset="WINDOWS-1251">
		<link rel="canonical" href="https://andryuxa.ru/blog/kak_sozdat_android_prilozhenie_na_php_html_js_css/">
		<!-- ,target-densitydpi=device-dpi -->
		<meta name="viewport" content="	initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,width=device-width,height=device-height,shrink-to-fit=no"><meta name="description" content="Реализация стандартных функций PHP в JAVA"><meta property="og:image" content="/i/64.jpg">
		<title>Как создать android приложение на php -|- Сайт Андрея</title>
		<link rel="stylesheet" type="text/css" href="/s/app.css">
		<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" >
	</head>
	<body>
		<div class="container u-full-width" id="app">
			<header>
				<div class="row">
					<div class="col">
						<div class="text-left u-mainhead">
							<h1>Блог Андрея</h1>
						</div>
					</div>
				</div>
			</header>
			<div>&nbsp;</div>
			<nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;">
			  <a class="navbar-brand" href="/">Начало</a>
			  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			  </button>

			  <div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
				  <li class="nav-item">
					<a class="nav-link" href="/portfolio/">Портфолио</a>
				  </li>
				  <li class="nav-item active">
					<a class="nav-link" href="/blog/">Блог</a>
				  </li>
				  <li class="nav-item">
					<a class="nav-link" href="/clients/">Клиентам</a>
				  </li>
				</ul>
			  </div>
			</nav>
			
			<div>&nbsp;</div>
			<div class="row">
				<div class="col-12 col-lg-8">
					<article>
						<h1>Как создать android приложение на php (+ html + js + css)</h1>
						<time datetime="2019-09-03" class="d-block text-right text-muted small">03.09.2019</time>
						<p>
<youtube video="https://www.youtube.com/watch?v=Q-nDX8R4_B0" img="/i/arttest.jpg" css="border:solid 1px red"></youtube>
<p>Статья адресована людям, занимающимся разработкой на PHP, у которых возникла необходимость по быстрому сделать android-приложение для личного пользования.</p>
						<p>Прежде всего хочется обратиться к профессиональным разработчикам android-приложений и к людям не занимающимся вообще никакой разработкой.</p>
						<p>Это <strong>НЕ</strong> статья о том как профессионально разрабатывать android приложения. Если вы не профессионал и ничего не знаете о профессиональной разработке android приложений, но хотите им стать, <strong>вам не надо это читать</strong>.</p>
						<p>Если вы профессиональный разработчик android приложений, вы не найдёте здесь ничего интересного.</p>
						<p>Приложение может стать вполне рабочим, например <a href="https://play.google.com/store/apps/details?id=land.learn.hw19" target="_blank">вот это в Google Play</a> опубликовано без проблем. (Скачиваний маловато, но я не задавался целью раскрутить приложение, я создал его для своих нужд, а ссылка на маркете позволяет легко им делиться с друзьями).</p>
						<p>Наверное, невозможно найти разработчика на PHP, который категорически не смог бы сверстать в HTML требуемый ему интерфейс, оживить его с помощью javascript и придать нужный ему вид с помощью css. </p>
						<p>Не все из нас смогут сделать то же самое работая на заказ, требования к фронтенду современных продакшен сайтов могут оказаться трудновыполнимыми, а порой и вообще непонятными.</p>
						<p>С другой стороны, когда нам нужен какой-то web-интерфейс для личного пользования, мы с лёгкостью его реализуем используя весь этот html/js/css так, как будто мы всю жизнь только фронтендом и занимались.</p>
						<p>Думаю, ни для кого не секрет, что можно сделать android приложение c webView и поместить в него ваш HTML5 интерфейс, но как взаимодействовать с устройством?</p>
						<p>Взаимодействие с устройством осуществляется добавлением программного интерфейса в виде объекта javascript. Вызывая методы этого объекта программист может из webView взаимодействовать например с файловой системой устройства, делать в принципе всё, что позволяют методы этого объекта, реализованные на языке Java.</p>
						<p>Мне, как человеку много лет кодившим на php  и иногда на javascript показалось очень удобным иметь в своём js коде объект с именем PHP и обеспечивающим как можно большее количество php функций, вызывая которые я мог бы например работать с файлами устройства, оперировать функцией date и другими. </p>
						<p>Конечно, реализовать все PHP функции маловероятно, но мне это и не надо, буду добавлять по мере необходимости.</p>
						<p>Сейчас реализованы вот такие функции <a href="https://github.com/lamzin-andrey/phpforjava/blob/master/PHPInterface.java" target="_blank">ссылка на исходный код PHPInterface</a></p>
						<p><a href="https://github.com/lamzin-andrey/phpforjava" target="_blank">Репозиторий на гитхаб</a> в котором этот класс будет время от времени обновляться и совершенствоваться.</p>
						<p>Как подтверждение, что это вполне жизнеспособная библиотека вот <a href="https://github.com/lamzin-andrey/CleverBrightness" target="_blank">исходный код android приложения опубликованного на маркете</a>.</p>
						<p>Ниже описаны особенности реализованых методов (если метод работает полностью совместимо с стандартной функцийе php его нет в этой таблице).</p>
											
						<table class="table table-bordered table-striped">
							<thead>
								<tr>
									<th>Метод</th>
									<th>Особенности</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td><code>file_get_contents</code></td>
									<td>На данным момент принимает только короткие имена файлов (например <code>"file.txt"</code>). Созданный файл будет доступен только тому приложению, которое его создало. 
									Планируется в дальнейшем поддержка полных имён файлов, например <code>"/mnt/sdcard/app/data/file.txt"</code>.
									</td>
								</tr>
								<tr>
									<td><code>file_exists</code></td>
									<td>См. <code>file_get_contents</code></td>
								</tr>
								<tr>
									<td><code>file_put_contents</code></td>
									<td>См. <code>file_get_contents</code>. Также, надо иметь ввиду, что при использовании констант, например <code>FILE_APPEND</code>, нужно использовать <code>PHPInterface.FILE_APPEND</code>;
									</td>
								</tr>
								<tr>
									<td><code>str_replace( String search, String replace, String subject, boolean getCount)</code></td>
									<td>В отличии от оргигнальной php функции, если нам нужно количество замен, мы не передаём переменную по ссылке, а указываем вместо неё true. Тогда <code>PHPInterface.STR_REPLACE_COUNT</code> будет содержать количество замен после вызова метода.</td>
								</tr>
								<tr>
									<td><code>in_array(needle, haystack)</code></td>
									<td>Пока работает только с массивами строк и целых чисел (<code>long</code> и <code>int</code>)</td>
								</tr>
								<tr>
									<td><code>strval</code></td>
									<td>Пока работает только с аргументами типа <code>long</code> и <code>int</code></td>
								</tr>
								<tr>
									<td><code>count</code></td>
									<td>Не работает с простыми типами java (такими как <code>long</code> и <code>int</code>), только с теми, которые наследуются от <code>Object</code></td>
								</tr>
							</tbody>
						</table>
						<p>Список методов, реализванных на <date>2019-05-30</date></p>
						<ul class="list-group">
							<li class="list-group-item active">Методы PHPInterface</li>
							<li class="list-group-item">count</li>
							<li class="list-group-item">date</li>
							<li class="list-group-item">file_get_contents</li>
							<li class="list-group-item">file_exists</li>
							<li class="list-group-item">file_put_contents</li>
							<li class="list-group-item">in_array</li>
							<li class="list-group-item">intval</li>
							<li class="list-group-item">str_replace</li>
							<li class="list-group-item">strlen</li>
							<li class="list-group-item">strval</li>
							<li class="list-group-item">time</li>
						</ul>
						
						<p>Примеры использования в java коде:</p>
						<pre class="border pl-2"><code class="language-java">
public class MainActivity extends Activity{
	
	public PHPInterface PHP;
	
	public void foo() {
		PHP = new PHPInterface(this.getApplicationContext());
		long currentTimestamp = PHP.time();
	}
}
						</code></pre>
<p>или, если нужен при работе приложения в фоне:</p>
<pre class="border pl-2"><code class="language-java">
public class ServiceDM extends Service{
	
	public PHPInterface PHP;
	
	public void foo() {
		PHP = new PHPInterface(this);
		long currentTimestamp = PHP.time();
	}
}
						</code></pre>
<p>Пример использования в javascript коде:</p>
<pre class="border pl-2"><code class="language-javascript">
//Практически в любом месте js загруженного в webView
var currentTimestamp = PHP.time();
PHP.file_put_contents('time_of_start.txt', currentTimestamp);
						</code></pre>
</p>
					</article>
				</div>
				<div class="col-12 col-lg-4  u-right-side">
					<ul class="list-group text-center mb-3">
						<li class="list-group-item bg-light">
	<p>Популярное в блоге</p>
</li>
<li class="list-group-item">
	<div><img data-src="/i/64.jpg" alt="Add7"></div>
	<div><a href="/blog/add7/">Add7</a></div>
	
</li>
<li class="list-group-item">
	<div><img data-src="/i/64.jpg" alt="Использование laravel-mix для сборки кода использующего наследование в javascript"></div>
	<div><a href="/blog/ispolzovanie_nasledovaniya_i_klassov_v_javascript_s_laravel_mix/">Использование laravel-mix для сборки кода использующего наследование в javascript</a></div>
	
</li>
<li class="list-group-item">
	<div><img data-src="/i/64.jpg" alt="Будущее из-под угла  &copy;"></div>
	<div><a href="/blog/kak_dobitsya_otobrajeniya_ikonok_fontawsome_v_mozilla_firefox_pri_otkrytii_faila_s_diska/">Будущее из-под угла  &copy;</a></div>
	
</li>
<li class="list-group-item">
	<div><img data-src="/i/64.jpg" alt="Установка laravel на xubuntu 18.04"></div>
	<div><a href="/blog/kak_ustanovit_poslednuu_versiu_laravel_v_xubuntu_1804/">Установка laravel на xubuntu 18.04</a></div>
	
</li>
<li class="list-group-item">
	<div><img data-src="/i/64.jpg" alt="Add8"></div>
	<div><a href="/blog/add8cuistom/">Add8</a></div>
	
</li>

<li class="list-group-item bg-light mt-4">
	<p>Работы из портфолио</p>
</li>
<li class="list-group-item">
	<div><img data-src="/i/64.jpg" alt="Test 1"></div>
	<div><a href="/portfolio/">Test 1</a></div>
	
</li>
<li class="list-group-item">
	<div><img data-src="/i/tklogo1.jpg" alt="TrollKIller"></div>
	<div><a href="/portfolio/web/userscripts/trollkiller/">TrollKIller</a></div>
	
</li>
<li class="list-group-item">
	<div><img data-src="https://lh3.googleusercontent.com/MTyf30M1sl_3JFHX0atGJTzDUXRKWr20amjRVD_IQmZjfdaMnYjNmtigx75Jcqzrxg=s180" alt="Умная яркость"></div>
	<div><a href="/portfolio/">Умная яркость</a></div>
	
</li>
<li class="list-group-item">
	<div><img data-src="http://mh.loc/i/cache.jpg" alt="Модуль кэширования с помощью service worker"></div>
	<div><a href="/portfolio/">Модуль кэширования с помощью service worker</a></div>
	
</li>
<li class="list-group-item">
	<div><img data-src="/i/vbt.jpg" alt="Vue 2 TreeView component"></div>
	<div><a href="/portfolio/web/components/frontend/vue/vue2_editable_tree_view/">Vue 2 TreeView component</a></div>
	
</li>


					</ul>
				</div>
			</div>
			<back-to-top text="Back to top" visibleoffset="300" right="10px">
				<img alt="Up" src="/i/up.png" id="bttimg" style="display:none">
			</back-to-top>
		</div>
		
			<div class="footer bg-dark text-light">
					<div class="container">
						<div class="row">
							<div class="col-2">
								<img src="/i/e64.png" width="32">
							</div>
							<div class="col-4">
								&copy; Андрей Ламзин
							</div>
						</div>
					</div>
			</div>
		<script>var rid = '389';</script>
        <script src="/j/d.js" async></script>
	</body>
</html>
